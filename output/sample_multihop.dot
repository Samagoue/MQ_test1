digraph MultiHop_Sample {
    rankdir=LR
    newrank=true
    fontname="Helvetica"
    bgcolor="#f7f9fb"
    splines=curved
    nodesep=0.9
    ranksep=1.5

    node [
        fontname="Helvetica"
        margin="0.35,0.25"
        penwidth=1.2
    ]
    edge [
        fontname="Helvetica"
        fontsize=10
        color="#5d6d7e"
        arrowsize=0.8
    ]

    /* ==========================
       INTERNAL ORGANIZATION
    ========================== */
    subgraph cluster_Internal_Org {
        label=<<b>Internal Organization: ACME Corp</b>>
        style="filled,rounded"
        fillcolor="#FEDCDB:#fee8e7"
        gradientangle=270
        color="#2d3e50"
        penwidth=3
        fontsize=22
        margin=40

        /* Department: Finance */
        subgraph cluster_Dep_Finance {
            label=<<b>Department: Finance</b>>
            style="filled,rounded"
            fillcolor="#e6f2ff:#edf6ff"
            gradientangle=270
            color="#1f78d1"
            penwidth=3
            fontsize=20
            margin=25

            /* BIZ OWNER: John Smith */
            subgraph cluster_BO_JohnSmith {
                label=<<b>Biz_Ownr: John Smith</b>>
                style="filled,rounded"
                fillcolor="#d3e7ff:#ddeeff"
                gradientangle=270
                color="#1c6ecf"
                penwidth=2.5
                fontsize=18
                margin=20

                /* App: Payment Processing */
                subgraph cluster_App_PaymentProc {
                    label=<<b>App: Payment Processing</b>>
                    style="filled,rounded"
                    fillcolor="#c7ddff:#d4e5ff"
                    gradientangle=270
                    color="#155fb3"
                    penwidth=2
                    fontsize=16
                    margin=15

                    QM_PAYMENT01 [
                        shape=cylinder
                        style="filled"
                        fillcolor="#d3e7ff:#c5dcf5"
                        gradientangle=90
                        color="#155fb3"
                        penwidth=1.8
                        fontcolor="#0f2a45"
                        label=<<b>QM_PAYMENT01</b><br/>QLocal: 15 | QRemote: 8 | QAlias: 3<br/> In: 2 | Out: 3 >
                    ]
                }
            }
        }

        /* Department: IT Operations */
        subgraph cluster_Dep_ITOps {
            label=<<b>Department: IT Operations</b>>
            style="filled,rounded"
            fillcolor="#e3f7ef:#ecfaf4"
            gradientangle=270
            color="#1fa463"
            penwidth=3
            fontsize=20
            margin=25

            /* BIZ OWNER: Gateway Team */
            subgraph cluster_BO_GatewayTeam {
                label=<<b>Biz_Ownr: Gateway Team</b>>
                style="filled,rounded"
                fillcolor="#c9f2dd:#d6f5e6"
                gradientangle=270
                color="#1c9e55"
                penwidth=2.5
                fontsize=18
                margin=20

                /* Gateway: External */
                subgraph cluster_Gateway_External {
                    label=<<b>Gateway: External</b>>
                    style="filled,rounded"
                    fillcolor="#e0f7fa:#e8f9fb"
                    gradientangle=270
                    color="#00bcd4"
                    penwidth=2.5
                    fontsize=16
                    margin=15

                    QM_GATEWAY_EXT [
                        shape=cylinder
                        style="filled"
                        fillcolor="#b2ebf2:#a3e4ec"
                        gradientangle=90
                        color="#0097a7"
                        penwidth=1.8
                        fontcolor="#006064"
                        label=<<b>QM_GATEWAY_EXT</b><br/>QLocal: 5 | QRemote: 25 | QAlias: 10<br/> In: 8 | Out: 12 >
                    ]

                    /* External Inbound Note - TOP */
                    QM_GATEWAY_EXT_inbound_extra [
                        shape=note
                        style="filled"
                        fillcolor="#fff3cd"
                        color="#ffc107"
                        penwidth=1.5
                        fontsize=9
                        label=< External Inbound<br/>* PARTNER_QM01<br/>* VENDOR_QM02>
                    ]
                    QM_GATEWAY_EXT_inbound_extra -> QM_GATEWAY_EXT [style=dashed color="#999999" arrowhead=none constraint=false headport=n tailport=s]

                    /* External Outbound Note - BOTTOM */
                    QM_GATEWAY_EXT_outbound_extra [
                        shape=note
                        style="filled"
                        fillcolor="#d1ecf1"
                        color="#17a2b8"
                        penwidth=1.5
                        fontsize=9
                        label=< External Outbound<br/>* CLOUD_QM01<br/>* SAAS_QM02>
                    ]
                    QM_GATEWAY_EXT -> QM_GATEWAY_EXT_outbound_extra [style=dashed color="#999999" arrowhead=none constraint=false tailport=s headport=n]
                }
            }
        }
    }

    /* ==========================
       EXTERNAL ORGANIZATION
    ========================== */
    subgraph cluster_External_Org {
        label=<<b>External Organization: Partner Bank</b>>
        style="filled,rounded"
        fillcolor="#daeca8:#e2f0bc"
        gradientangle=270
        color="#6a3fa0"
        penwidth=3
        fontsize=20
        margin=40

        /* Department: External Systems */
        subgraph cluster_Dep_ExtSystems {
            label=<<b>Department: External Systems</b>>
            style="filled,rounded"
            fillcolor="#e8ddf5:#eee6f8"
            gradientangle=270
            color="#5a2f90"
            penwidth=2.5
            fontsize=18
            margin=20

            /* BIZ OWNER: Partner IT */
            subgraph cluster_BO_PartnerIT {
                label=<<b>Biz_Ownr: Partner IT</b>>
                style="filled,rounded"
                fillcolor="#dfd2f3:#e6dcf6"
                gradientangle=270
                color="#4f2788"
                penwidth=2
                fontsize=16
                margin=18

                /* App: Partner Integration */
                subgraph cluster_App_PartnerInt {
                    label=<<b>App: Partner Integration</b>>
                    style="filled,rounded"
                    fillcolor="#d6c7ef:#ddd1f2"
                    gradientangle=270
                    color="#4f2788"
                    penwidth=2
                    fontsize=14
                    margin=15

                    QM_PARTNER01 [
                        shape=cylinder
                        style="filled"
                        fillcolor="#e8ddf5:#ddd0ed"
                        gradientangle=90
                        color="#4f2788"
                        penwidth=1.8
                        fontcolor="#2d1b4a"
                        label=<<b>QM_PARTNER01</b><br/>QLocal: 10 | QRemote: 5 | QAlias: 2<br/> In: 3 | Out: 2 >
                    ]
                }
            }
        }
    }

    /* ==========================
       CONNECTIONS - Multi-Hop Path
    ========================== */

    /* HOP 1: Internal App to Gateway - Cross-department (coral, diamond) */
    QM_PAYMENT01 -> QM_GATEWAY_EXT [color="#ff6b5a" penwidth=2.2 style=dashed arrowhead=diamond weight=2 label="Hop 1: Cross-Dept"]

    /* HOP 2: Gateway to External - Cross-org (purple, dot) */
    QM_GATEWAY_EXT -> QM_PARTNER01 [color="#b455ff" penwidth=2.2 style=dashed arrowhead=dot weight=1 label="Hop 2: Cross-Org"]

    /* Example: Bidirectional relationship (teal) */
    /* If QM_PARTNER01 also sends back to QM_GATEWAY_EXT */
    /* Uncomment below to see bidirectional styling:
    QM_GATEWAY_EXT -> QM_PARTNER01 [color="#00897b" penwidth=2.5 style=bold arrowhead=dot dir=both arrowtail=odot weight=1 label="Bidirectional"]
    */

    /* ==========================
       LEGEND
    ========================== */
    subgraph cluster_legend {
        label=<<b>Legend - Multi-Hop Connections</b>>
        style="rounded,filled"
        fillcolor="#ffffff"
        color="#d0d8e0"
        penwidth=1.8
        fontsize=14
        margin=20

        legend_item [
            shape=box
            style="rounded,filled"
            fillcolor="#f7f9fb"
            color="#d6d6d6"
            penwidth=1
            label=<
                <table border="0" cellborder="0" cellspacing="4" cellpadding="2">
                    <tr><td align="left"><b>Multi-Hop Path Example</b></td></tr>
                    <tr><td align="left">QM_PAYMENT01 Gateway QM_PARTNER01</td></tr>

                    <tr><td><br/></td></tr>

                    <tr><td align="left"><b>Connection Types</b></td></tr>
                    <tr><td align="left"><font color="#1f78d1"><b>──── </b></font> Same department (solid blue)</td></tr>
                    <tr><td align="left"><font color="#ff6b5a"><b>- - &#9830; </b></font> Cross-department (coral, diamond)</td></tr>
                    <tr><td align="left"><font color="#b455ff"><b>- - &#9679; </b></font> Cross-org / External (purple, dot)</td></tr>
                    <tr><td align="left"><font color="#00897b"><b>&#9675;━━━&#9679; </b></font> Bidirectional (teal, bold)</td></tr>

                    <tr><td><br/></td></tr>

                    <tr><td align="left"><b>External Connection Notes</b></td></tr>
                    <tr><td align="left"><font color="#ffc107">&#128203;</font> External Inbound (yellow, TOP)</td></tr>
                    <tr><td align="left"><font color="#17a2b8">&#128203;</font> External Outbound (blue, BOTTOM)</td></tr>

                    <tr><td><br/></td></tr>

                    <tr><td align="left"><b>Gradient Fills</b></td></tr>
                    <tr><td align="left">Clusters: Vertical (top to bottom)</td></tr>
                    <tr><td align="left">Nodes: Horizontal (left to right)</td></tr>

                </table>
            >
        ]
    }
}
